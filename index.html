```html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>José Barbearia</title>

<style>
body{
  font-family: Arial;
  background:#111;
  color:#fff;
  text-align:center;
}
.container{
  max-width:400px;
  margin:auto;
  background:#1c1c1c;
  padding:20px;
  border-radius:10px;
}
input,select,button{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  border:none;
}
button{
  background:#00c853;
  color:#fff;
  font-size:16px;
}
.horarios{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}
.horario{
  background:#333;
  padding:6px;
  border-radius:6px;
  cursor:pointer;
}
.horario.ocupado{
  background:#900;
}
.admin{
  margin-top:30px;
  background:#222;
  padding:15px;
  border-radius:10px;
}
</style>
</head>
<body>

<div class="container">
<h2>Agende seu horário</h2>

<input type="text" id="nome" placeholder="Seu nome">
<input type="date" id="data">

<div class="horarios" id="listaHorarios"></div>

<button onclick="agendar()">Confirmar Agendamento</button>

<div id="status"></div>

<div class="admin">
<h3>Área Administrativa</h3>
<input type="date" id="adminData">
<button onclick="carregarAdmin()">Ver Agenda</button>
<button onclick="bloquearDia()">Bloquear Dia Inteiro</button>
<div id="listaAdmin"></div>
</div>

</div>

<script type="module">

// ===== FIREBASE (COLE SUA CONFIG AQUI) =====
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, push, onValue, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "COLE_AQUI",
  authDomain: "COLE_AQUI",
  databaseURL: "COLE_AQUI",
  projectId: "COLE_AQUI",
  storageBucket: "COLE_AQUI",
  messagingSenderId: "COLE_AQUI",
  appId: "COLE_AQUI"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// ===== HORÁRIOS 10 EM 10 MIN =====
const listaHorarios = document.getElementById("listaHorarios");
let horarioSelecionado = null;

function gerarHorarios(){
  listaHorarios.innerHTML="";
  for(let h=8; h<=18; h++){
    for(let m=0; m<60; m+=10){
      const hora = `${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}`;
      const div=document.createElement("div");
      div.className="horario";
      div.textContent=hora;
      div.onclick=()=>{
        horarioSelecionado=hora;
        document.querySelectorAll(".horario").forEach(el=>el.style.background="#333");
        div.style.background="#00c853";
      };
      listaHorarios.appendChild(div);
    }
  }
}
gerarHorarios();

// ===== BLOQUEAR HORÁRIOS OCUPADOS =====
document.getElementById("data").addEventListener("change",()=>{
  const data=document.getElementById("data").value;
  const refData=ref(db,"agendamentos/"+data);

  onValue(refData,(snapshot)=>{
    gerarHorarios();
    const dados=snapshot.val();
    if(!dados) return;

    document.querySelectorAll(".horario").forEach(div=>{
      for(let key in dados){
        if(dados[key].horario===div.textContent){
          div.classList.add("ocupado");
          div.onclick=null;
        }
      }
    });
  });
});

// ===== AGENDAR =====
window.agendar=function(){
  const nome=document.getElementById("nome").value;
  const data=document.getElementById("data").value;
  const status=document.getElementById("status");

  if(!nome || !data || !horarioSelecionado){
    status.textContent="Preencha tudo";
    return;
  }

  const codigo=Math.random().toString(36).substring(2,10).toUpperCase();

  const agendamento={
    nome,
    horario:horarioSelecionado,
    codigo,
    servico:"CORTE",
    profissional:"JOSE GILMARIO"
  };

  push(ref(db,"agendamentos/"+data),agendamento).then(()=>{

    const dataFormatada=new Date(data).toLocaleDateString("pt-BR",{weekday:'long',day:'numeric',month:'long',year:'numeric'});

    const linkCancelamento = `${location.origin}${location.pathname}?cancelar=${codigo}&data=${data}`;

    const mensagem=`Olá, ${nome} o seu agendamento com a *José Barbearia* foi confirmado!

Serviço: CORTE
Quando: ${dataFormatada} às ${horarioSelecionado}
Profissional: JOSE GILMARIO
Código: ${codigo}

Endereço: Av. Otávio Rangel, 477 - Guariba - SP

Cancelar:
${linkCancelamento}`;

    const url=`https://wa.me/5516997369740?text=${encodeURIComponent(mensagem)}`;
    window.open(url,"_blank");

    status.textContent="Agendado!";
  });
};

// ===== CANCELAMENTO POR LINK =====
const params=new URLSearchParams(window.location.search);
const codigoCancelar=params.get("cancelar");
const dataCancelar=params.get("data");

if(codigoCancelar && dataCancelar){
  const refData=ref(db,"agendamentos/"+dataCancelar);
  onValue(refData,(snapshot)=>{
    const dados=snapshot.val();
    if(!dados) return;

    for(let key in dados){
      if(dados[key].codigo===codigoCancelar){
        set(ref(db,"agendamentos/"+dataCancelar+"/"+key),null);
        alert("Agendamento cancelado");
        window.location.href=location.pathname;
      }
    }
  },{onlyOnce:true});
}

// ===== ADMIN =====
window.carregarAdmin=function(){
  const data=document.getElementById("adminData").value;
  const lista=document.getElementById("listaAdmin");
  lista.innerHTML="";

  onValue(ref(db,"agendamentos/"+data),(snapshot)=>{
    const dados=snapshot.val();
    lista.innerHTML="";

    if(!dados){
      lista.innerHTML="Nenhum agendamento";
      return;
    }

    for(let key in dados){
      lista.innerHTML+=`
      <div style="background:#333;padding:8px;margin:6px;border-radius:6px">
        ${dados[key].horario} - ${dados[key].nome}<br>
        Código: ${dados[key].codigo}<br>
        <button onclick="cancelarAdmin('${data}','${key}')">Cancelar</button>
      </div>`;
    }
  });
};

window.cancelarAdmin=function(data,key){
  if(confirm("Cancelar agendamento?")){
    set(ref(db,"agendamentos/"+data+"/"+key),null);
  }
};

// ===== BLOQUEAR DIA =====
window.bloquearDia=function(){
  const data=document.getElementById("adminData").value;
  if(confirm("Bloquear dia inteiro?")){
    set(ref(db,"agendamentos/"+data),{bloqueado:true});
  }
};

</script>
</body>
</html>
```
