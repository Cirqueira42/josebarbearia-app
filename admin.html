<!DOCTYPE html>

<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel Admin - José Barbearia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS do projeto -->

  <link rel="stylesheet" href="style.css">

  <!-- Firebase -->

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

</head>

<body>

<!-- Proteção por senha -->

<script>
  const senha = prompt("Digite a senha do administrador:");

  if (senha !== "jose2026") {
    alert("Acesso negado!");
    window.location.href = "index.html";
  }
</script>

<div class="container">
  <h1>Painel Administrativo</h1>
  <h3>Agendamentos</h3>

  <div id="listaAgendamentos"></div>
</div>

<script>
  // SUA CONFIGURAÇÃO FIREBASE (mantenha a mesma do index.html)
  const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "SEU_DOMINIO.firebaseapp.com",
    projectId: "SEU_PROJECT_ID",
    storageBucket: "SEU_BUCKET",
    messagingSenderId: "SEU_SENDER_ID",
    appId: "SEU_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const lista = document.getElementById("listaAgendamentos");

  function carregarAgendamentos() {
    db.collection("agendamentos")
      .orderBy("data")
      .get()
      .then(snapshot => {
        lista.innerHTML = "";

        if (snapshot.empty) {
          lista.innerHTML = "<p>Nenhum agendamento encontrado</p>";
          return;
        }

        snapshot.forEach(doc => {
          const dados = doc.data();

          const item = document.createElement("div");
          item.className = "card";

          item.innerHTML = `
            <p><strong>Nome:</strong> ${dados.nome}</p>
            <p><strong>Serviço:</strong> ${dados.servico}</p>
            <p><strong>Data:</strong> ${dados.data}</p>
            <p><strong>Horário:</strong> ${dados.horario}</p>
            <button onclick="excluir('${doc.id}')">Excluir</button>
            <hr>
          `;

          lista.appendChild(item);
        });
      });
  }

  function excluir(id) {
    if (confirm("Deseja excluir este agendamento?")) {
      db.collection("agendamentos").doc(id).delete()
        .then(() => {
          alert("Excluído com sucesso!");
          carregarAgendamentos();
        });
    }
  }

  carregarAgendamentos();
</script>

</body>
</html>
